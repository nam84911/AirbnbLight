{"version":3,"sources":["./src/app/booking/booking.page.html","./src/app/booking/booking-routing.module.ts","./src/app/booking/booking.model.ts","./src/app/booking/booking.module.ts","./src/app/booking/booking.page.scss","./src/app/booking/booking.page.ts","./src/app/booking/booking.service.ts"],"names":[],"mappings":"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","file":"booking-booking-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-button fill=\\\"clear\\\"color=\\\"primary\\\"  slot=\\\"start\\\">\\n      <ion-menu-button menu=\\\"first\\\"></ion-menu-button>\\n    </ion-button>\\n    <ion-title>Bookings</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"ion-text-center\\\" *ngIf=\\\"isLoading\\\">\\n    <ion-spinner></ion-spinner>\\n  </div>\\n  <ion-grid *ngIf=\\\"!isLoading\\\"> \\n    <ion-row>\\n      <ion-col size-md=\\\"6\\\" offset-md=\\\"3\\\">\\n        <ion-list>\\n          <ion-item-sliding *ngFor =\\\"let booking of bookings\\\" #slider>\\n            <ion-item>\\n                <ion-thumbnail slot=\\\"start\\\">\\n                  <ion-img [src]=\\\"booking.photoURL\\\"></ion-img>\\n                </ion-thumbnail>\\n                <ion-title>\\n                  <ion-label>\\n                        <ion-grid >\\n                          <ion-row>\\n                            <ion-col class=\\\"ion-text-start\\\"size-sm=\\\"7\\\">\\n                              <h5>{{booking.title}}</h5>\\n                            </ion-col>\\n                            <ion-col class=\\\"ion-text-end\\\" size-sm=\\\"5\\\">\\n                              <p>Guests: {{booking.guests}}</p>\\n                            </ion-col>\\n                          </ion-row>\\n\\n                          <ion-row>\\n                            <ion-col class=\\\"ion-text-start\\\"size=\\\"6\\\">\\n                              <ion-icon name=\\\"calendar\\\"></ion-icon>\\n                              {{booking.from.getFullYear()}}/{{booking.from.getMonth()}}/{{booking.from.getDate()}}\\n                            </ion-col>\\n                            <ion-col class=\\\"ion-text-end\\\" size=\\\"6\\\">\\n                              <ion-icon name=\\\"calendar\\\"></ion-icon>\\n                              {{booking.to.getFullYear()}}/{{booking.to.getMonth()}}/{{booking.to.getDate()}}\\n                            </ion-col>\\n                          </ion-row>\\n                        </ion-grid>\\n                      \\n                  </ion-label>\\n                </ion-title>\\n            </ion-item>\\n            <ion-item-options>\\n              <ion-item-option color=\\\"danger\\\" (click)=\\\"onDelete(booking.id,slider)\\\">\\n                <ion-icon name=\\\"trash\\\" slot=\\\"icon-only\\\"></ion-icon>\\n              </ion-item-option>\\n            </ion-item-options>\\n\\n            <ion-item-options side=\\\"start\\\" >\\n              <ion-item-option color=\\\"danger\\\" (click)=\\\"onDelete(booking.id,slider)\\\">\\n                <ion-icon name=\\\"trash\\\" slot=\\\"icon-only\\\"></ion-icon>\\n              </ion-item-option>\\n            </ion-item-options>\\n          </ion-item-sliding>\\n        </ion-list>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { BookingPage } from './booking.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BookingPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class BookingPageRoutingModule {}\n","export class Booking{\n    constructor(\n        public id:String,\n        public placeId:String,\n        public userId:String,\n        public title:String,\n        public guests:number,\n        public first:string,\n        public last:string,\n        public photoURL:string,\n        public from:Date,\n        public to:Date){}\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { BookingPageRoutingModule } from './booking-routing.module';\n\nimport { BookingPage } from './booking.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    BookingPageRoutingModule\n  ],\n  declarations: [BookingPage]\n})\nexport class BookingPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Jvb2tpbmcvYm9va2luZy5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { Booking } from './booking.model';\nimport { BookingService } from './booking.service';\nimport { IonItemSliding, LoadingController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-booking',\n  templateUrl: './booking.page.html',\n  styleUrls: ['./booking.page.scss'],\n})\nexport class BookingPage implements OnInit {\n  bookings:Booking[]\n  isLoading=true\n  constructor(private loading:LoadingController,private service :BookingService) { }\n\n  ngOnInit() {\n    this.service.bookings.subscribe(bookings=>{\n      this.bookings=bookings\n    })\n  }\n  ionViewWillEnter(){\n    this.isLoading=true\n    this.service.fetchBooking().subscribe(()=>{\n      this.isLoading=false\n    })\n  }\n  onDelete(id:string, slider:IonItemSliding){\n    slider.close()\n    this.loading.create({message:\"Loading\"}).then(ctr=>{\n      ctr.present()\n      this.service.cancelBooking(id).subscribe(()=>{\n        ctr.dismiss()\n      })\n    })\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Booking } from './booking.model';\nimport { BehaviorSubject } from 'rxjs';\nimport {take,map,tap,delay, switchMap} from \"rxjs/operators\"\nimport { HttpClient } from '@angular/common/http';\nimport { AuthService } from '../auth/auth.service';\ninterface BookingData{\n   placeId:String,\n   userId:String,\n   title:String,\n   guests:number,\n   first:string,\n   last:string,\n   photoURL:string,\n   from:Date,\n   to:Date\n}\n@Injectable({\n  providedIn: 'root'\n})\nexport class BookingService {\n private _bookings= new BehaviorSubject<Booking[]>([])\n\n get bookings(){\n  return this._bookings.asObservable()\n}\n  constructor(private http:HttpClient,private auth:AuthService) { }\n fetchBooking(){\n  return this.http.get<{[key:string]:BookingData}>(`https://airbnblight.firebaseio.com/bookings.json?orderBy=\"userId\"&equalTo=\"${this.auth.userId}\"`).\n  pipe(map(res=>{\n    const bookings:Booking[]=[]\n    for(let s in res){\n      if(res.hasOwnProperty(s)){\n        bookings.push(new Booking(\n          s,\n          res[s].placeId,\n          res[s].userId,\n          res[s].title,\n          +res[s].guests,\n          res[s].first,\n          res[s].last,\n          res[s].photoURL,\n          new Date(res[s].from),\n          new Date(res[s].to)\n        ))\n      }\n    }\n    return bookings\n  }),tap(bookings=>{\n    this._bookings.next(bookings)\n  }))\n\n }\n  cancelBooking(id){\n    return this.http.delete(`https://airbnblight.firebaseio.com/bookings/${id}.json`).pipe(\n      switchMap(res=>{\n        console.log(res)\n        return this._bookings\n      }),take(1),tap(bookings=>{\n        this._bookings.next(bookings.filter(b=>b.id!=id))\n      })\n    )\n    \n    /*return this.bookings.pipe(take(1),delay(1000),tap(bookings=>{\n      this._bookings.next(bookings.filter(b=>b.id!=id))\n    }))*/\n  }\n addBooking(id,\n            placeId,\n            userId,\n            title,\n            guests,\n            first,\n            last,\n            photoURL,\n            from,\n            to){\n    const booking=new Booking(id,\n                            placeId,\n                            userId,\n                            title,\n                            guests,\n                            first,\n                            last,\n                            photoURL,\n                            from,\n                            to)\n      let idIs:string\n      return this.http.post<{name:string}>(`https://airbnblight.firebaseio.com/bookings.json`,{...booking,id:null}).\n      pipe(switchMap(res=>{\n        idIs=res.name\n        return this._bookings\n      }),take(1),tap(places=>{\n        booking.id=idIs\n        this._bookings.next(places.concat(booking))\n      }))\n    /*return this._bookings.pipe(take(1),delay(1000),tap(bookings=>{\n      this._bookings.next(bookings.concat(booking))\n    }))*/\n\n  }\n}\n"],"sourceRoot":"webpack:///"}